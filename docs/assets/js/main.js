"use strict";const btn=document.querySelector(".js__btn"),input=document.querySelector(".js__input"),list=document.querySelector(".js-shows-list"),listFavorite=document.querySelector(".js-favorites-list");let resetBtn=document.querySelector(".js-reset-btn"),showList=[],favoritesList=[];function getShowsData(t){t.preventDefault();const e=input.value;fetch("//api.tvmaze.com/search/shows?q="+e).then(t=>t.json()).then(t=>{showList=t,paintShows(),listenShows(),paintFavorites(),listenFavorites()})}function paintShows(){let t="";for(let e=0;e<showList.length;e++){let s="";s=-1!==favoritesList.findIndex((function(t){return t.id===showList[e].show.id}))?"show__item--favorite":"",t+=`<li class="shows-list js-show-item ${s}" id="${showList[e].show.id}">`,t+=`<h3 class="shows-list__title">${showList[e].show.name}</h3>`,t+='<div class="shows-list__container">',null===showList[e].show.image?t+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?\n      text=TV." alt="no existe imagen de la serie">':t+=`<img src="${showList[e].show.image.medium||showList[e].show.image.original}" alt="imagen de la serie ${showList[e].show.name}" title="cartel de ${showList[e].show.name}">`,t+="</div>",t+="</li>"}list.innerHTML=t,listenFavorites()}function favoritesShows(t){const e=parseInt(t.currentTarget.id),s=favoritesList.findIndex((function(t){return t.id===e}));if(!0===(-1!==s))favoritesList.splice(s,1);else for(let t=0;t<showList.length;t++)showList[t].show.id===e&&favoritesList.push(showList[t].show);paintShows(),listenShows(),paintFavorites(),setLocalStorage(),listenFavorites()}function listenShows(){const t=document.querySelectorAll(".js-show-item");for(const e of t)e.addEventListener("click",favoritesShows)}function paintFavorites(){let t="";for(let e=0;e<favoritesList.length;e++)t+='<li class="favorite-list">',t+='<div class="favorite-list__container">',null===favoritesList[e].image?t+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?\n      text=TV." alt="no existe imagen de la serie" class="favorite-list__container--img">':t+=`<img src="${favoritesList[e].image.medium||favoritesList[e].image.original}" alt="imagen de la serie ${favoritesList[e].name}" class="favorite-list__container--img" title="cartel de ${favoritesList[e].name}">`,t+="</div>",t+=`<h4 = class="favorite-list__title">${favoritesList[e].name}</h4>`,t+=`<i class="fas fa-times-circle favorite-list__icon js-favorite-item" id="${favoritesList[e].id}"></i>`;listFavorite.innerHTML=t,listenFavorites()}function setLocalStorage(){const t=JSON.stringify(favoritesList);localStorage.setItem("favorites",t)}function getLocalStorage(){const t=localStorage.getItem("favorites");null!==t&&(favoritesList=JSON.parse(t)),paintFavorites()}function reset(){favoritesList=[],localStorage.removeItem("favorites"),paintFavorites(),paintShows(),listenShows(),listenFavorites()}function resetFavorite(t){const e=parseInt(t.currentTarget.id),s=favoritesList.findIndex((function(t){return t.id===e}));!0===(-1!==s)&&favoritesList.splice(s,1),paintFavorites(),listenFavorites(),paintShows(),listenShows(),setLocalStorage()}function listenFavorites(){const t=document.querySelectorAll(".js-favorite-item");for(const e of t)e.addEventListener("click",resetFavorite)}btn.addEventListener("click",getShowsData),getLocalStorage(),resetBtn.addEventListener("click",reset),listenFavorites();